#创建守护进程的步骤

1. 创建子进程，父进程退出
2. 使用函数**setsid()**创建新会话
3. 改变根目录
4. 使用 **umask(0)** 函数重设文件权限掩码
5. 关闭文件描述符

##umask function
默认的情况下，创建一个文件的权限为```rw-r--r--```，而创建一个目录的权限为```rwxr-xr-x```，如果默认的不符合用户的需求，可以用chmod命令进行设置，但这样的效率很低。


linux提供了一个方便的工具umask，可以用来设置文件的默认掩码。


文件的默认权限就是umask设置的掩码和系统中默认的最大权限码做异或运算，其结果就是文件的默认权限